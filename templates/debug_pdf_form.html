{% extends "base.html" %}

{% block content %}
<div class="card mb-4">
    <div class="card-header">
        <h4>Gerar PDF Completo do Processo</h4>
    </div>
    <div class="card-body">
        <form method="POST" action="{{ url_for('web.debug_pdf_completo') }}">
            <div class="mb-3">
                <label for="num_processo" class="form-label">Número do Processo</label>
                <input type="text" class="form-control" id="num_processo" name="num_processo" 
                    placeholder="0000000-00.0000.0.00.0000" required
                    data-bs-toggle="tooltip" 
                    title="Digite o número do processo para gerar um único PDF com todos os documentos">
            </div>
            <div class="mb-3">
                <label for="cpf" class="form-label">CPF/CNPJ Consultante (opcional)</label>
                <input type="text" class="form-control" id="cpf" name="cpf" 
                    placeholder="Apenas números">
            </div>
            <div class="mb-3">
                <label for="senha" class="form-label">Senha (opcional)</label>
                <input type="password" class="form-control" id="senha" name="senha">
            </div>
            <div class="alert alert-warning">
                <i class="bi bi-exclamation-triangle"></i> 
                Esta operação pode levar alguns minutos dependendo do número de documentos no processo.
            </div>
            <button type="submit" class="btn btn-danger w-100">
                <i class="bi bi-file-earmark-pdf"></i> Gerar PDF Completo
            </button>
        </form>
    </div>
</div>

{% if erro_pdf %}
<div class="card mt-4">
    <div class="card-header bg-danger text-white">
        <h5>Erro ao Gerar PDF</h5>
    </div>
    <div class="card-body">
        <div class="alert alert-danger">{{ erro_pdf }}</div>
        
        {% if stats_pdf %}
        <h6>Estatísticas:</h6>
        <ul>
            <li>Total de documentos: {{ stats_pdf.total_documents }}</li>
            <li>PDFs processados: {{ stats_pdf.pdf_documents }}</li>
            <li>HTMLs processados: {{ stats_pdf.html_documents }}</li>
            <li>Documentos falhos: {{ stats_pdf.failed_documents }}</li>
        </ul>
        {% endif %}
    </div>
</div>
{% endif %}
{% endblock %}
